<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Question</title>

<style>
  body{
    font-family: "Times New Roman", Times, serif;
    background: #ffffff;
    color: #000000;
    margin: 0;
    height: 100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  .container{
    width: 760px;
    max-width: calc(100vw - 40px);
    border: 1px solid #000;
    padding: 44px;
    position: relative;
    background: #ffffff; /* keeps text readable */
    z-index: 2;
  }

  .question{
    font-size: 26px;
    line-height: 1.35;
    margin: 0;
    font-weight: normal;
  }

  .boxes{
    margin-top: 34px;
    position: relative;
    height: 70px;
  }

  .box{
    font-family: "Times New Roman", Times, serif;
    font-size: 18px;
    border: 1px solid #000;
    padding: 16px 18px;
    width: 260px;
    text-align: center;
    cursor: pointer;
    user-select: none;
    touch-action: manipulation;
  }

  #yesBox{
    background: #1d8f3a;
    color: #ffffff;
    position: absolute;
    left: 0;
    top: 0;
  }

  #noBox{
    background: #c51f1f;
    color: #ffffff;
    position: absolute;
    left: 290px;
    top: 0;
  }

  .hint{
    margin-top: 26px;
    border-top: 1px solid #000;
    padding-top: 18px;
    font-size: 16px;
  }

  /* Celebration overlay (does not obscure center text) */
  #celebration{
    display: none;
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1; /* behind the container, above body */
  }

  .spinBox{
    position: absolute;
    width: 34px;
    height: 34px;
    border: 2px solid #000;
    background: transparent;
    opacity: 0.85;
    animation: spin 900ms linear infinite;
  }

  @keyframes spin{
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
  }

  .floatCircle{
    position: absolute;
    width: 18px;
    height: 18px;
    border: 2px solid #000;
    border-radius: 999px;
    opacity: 0.65;
    animation: drift 2600ms linear infinite;
  }

  @keyframes drift{
    0%   { transform: translateY(0px); }
    50%  { transform: translateY(-22px); }
    100% { transform: translateY(0px); }
  }

  .successText{
    font-size: 28px;
    line-height: 1.25;
    font-weight: normal;
    margin: 0;
  }

  .successWrap{
    text-align: center;
  }
</style>
</head>

<body>
  <div id="celebration"></div>

  <div class="container" id="container">
    <p class="question" id="question">
      Are we hanging out soon? We haven't had a proper catch up since we got back from break. Freak.
    </p>

    <div class="boxes">
      <div class="box" id="yesBox">Yes</div>
      <div class="box" id="noBox">No</div>
    </div>

    <div class="hint" id="hint">Choose wisely.</div>
  </div>

<script>
  const yesBox = document.getElementById("yesBox");
  const noBox  = document.getElementById("noBox");
  const container = document.getElementById("container");
  const celebration = document.getElementById("celebration");

  const yesLines = [
    "Wait try again.",
    "Oop, you were a little slow there",
    "lol.",
    "Damn Jacob tf?",
    "Is this why ur flag football team lost the game?",
    "Because ur sloooowww?"
    "Okay last one",
    "SIKE",
    "Okay jk really last one promise."
  ];

  const noLines = [
    "Wait wtf?",
    "You better not be trying to hit No",
    "WHAT DO YOU MEAN YOU DOn'T WANNA HANG OUT???",
    "JACOB HUH",
    "Oh my god.",
    "No whatever it's fine",
    "I'm fine. I get it.",
    "Okay but fr tho stop playing.",
    "Green box is what u meant to hit.",
    "Fine how about this?"
  ];

  let yesIdx = 0;
  let noIdx = 0;
  let yesArmedForFinalClick = false; // shows final line and stops dodging
  let done = false;

  function moveElement(el){
    const padding = 12;
    const w = el.offsetWidth || 260;
    const h = el.offsetHeight || 60;

    const maxX = Math.max(padding, window.innerWidth - w - padding);
    const maxY = Math.max(padding, window.innerHeight - h - padding);

    const x = Math.floor(Math.random() * maxX);
    const y = Math.floor(Math.random() * maxY);

    el.style.position = "fixed";
    el.style.left = x + "px";
    el.style.top  = y + "px";
  }

  function buildCelebration(){
    celebration.innerHTML = "";
    celebration.style.display = "block";

    // Put spinning boxes around the perimeter
    const boxes = 20;
    for (let i=0; i<boxes; i++){
      const b = document.createElement("div");
      b.className = "spinBox";
      b.style.left = (Math.random()*100) + "vw";
      b.style.top  = (Math.random()*100) + "vh";
      b.style.animationDuration = (600 + Math.random()*1200) + "ms";
      b.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
      celebration.appendChild(b);
    }

    // Floating circles (slower)
    const circles = 26;
    for (let i=0; i<circles; i++){
      const c = document.createElement("div");
      c.className = "floatCircle";
      c.style.left = (Math.random()*100) + "vw";
      c.style.top  = (Math.random()*100) + "vh";
      c.style.animationDuration = (1800 + Math.random()*2200) + "ms";
      c.style.opacity = (0.25 + Math.random()*0.55).toFixed(2);
      celebration.appendChild(c);
    }
  }

  function success(){
    if (done) return;
    done = true;

    buildCelebration();

    container.innerHTML = `
      <div class="successWrap">
        <p class="successText">
          WOOOHOOOO! Lmk when ur free. Btw this is how I used my study break (I'm going to crash out on anatomy lab studying).
        </p>
      </div>
    `;
  }

  // YES:
  // - Until final line: any attempt (hover/tap/click) makes it dodge and cycle lines.
  // - When it reaches the final line: it displays final line and stops dodging.
  // - Only a real CLICK after that registers success.
  function yesAttemptNonClick(e){
    if (done) return;

    // If we're armed for final click, hovering/tapping should NOT trigger success or movement.
    // We want them to actually click it.
    if (yesArmedForFinalClick) {
      if (e) { e.preventDefault(); e.stopPropagation(); }
      return;
    }

    if (e) { e.preventDefault(); e.stopPropagation(); }

    yesBox.textContent = yesLines[yesIdx];

    // If this is the last line, arm it and STOP dodging.
    if (yesIdx === yesLines.length - 1){
      yesArmedForFinalClick = true;

      // Put it back into the normal slot (so it’s clearly clickable)
      yesBox.style.position = "absolute";
      yesBox.style.left = "0px";
      yesBox.style.top = "0px";
      yesBox.style.cursor = "pointer";
      return;
    }

    yesIdx++;
    moveElement(yesBox);
  }

  function yesFinalClick(e){
    if (done) return;

    // Only count if armed
    if (!yesArmedForFinalClick){
      // If they clicked early, treat like an attempt and dodge
      yesAttemptNonClick(e);
      return;
    }

    // This is the actual registered Yes.
    if (e) { e.preventDefault(); e.stopPropagation(); }
    success();
  }

  // NO:
  // - Always dodges and cycles.
  // - On final NO line, it converts and registers YES immediately.
  function noAttempt(e){
    if (done) return;
    if (e) { e.preventDefault(); e.stopPropagation(); }

    noBox.textContent = noLines[noIdx];

    if (noIdx === noLines.length - 1){
      // Turn into a YES green box response and register success
      noBox.style.background = "#1d8f3a";
      noBox.textContent = "Okay jk really last one promise.";
      success();
      return;
    }

    noIdx++;
    moveElement(noBox);
  }

  // Event wiring:
  // For YES:
  // - Hover/pointerdown/touchstart => only cycles + dodges until final is armed.
  // - Click => registers only when armed.
  yesBox.addEventListener("mouseenter", yesAttemptNonClick);
  yesBox.addEventListener("pointerdown", yesAttemptNonClick);
  yesBox.addEventListener("touchstart", yesAttemptNonClick, { passive:false });
  yesBox.addEventListener("mousedown", yesAttemptNonClick);
  yesBox.addEventListener("click", yesFinalClick);

  // For NO: all attempts dodge/cycle, click doesn’t “select” no.
  noBox.addEventListener("mouseenter", noAttempt);
  noBox.addEventListener("pointerdown", noAttempt);
  noBox.addEventListener("touchstart", noAttempt, { passive:false });
  noBox.addEventListener("mousedown", noAttempt);
  noBox.addEventListener("click", noAttempt);

  // Keep escaped elements on screen after resize
  window.addEventListener("resize", () => {
    if (yesBox.style.position === "fixed") moveElement(yesBox);
    if (noBox.style.position === "fixed") moveElement(noBox);
  });
</script>
</body>
</html>
