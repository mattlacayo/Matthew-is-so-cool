<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Question</title>

<script>
  const yesBox = document.getElementById("yesBox");
  const noBox  = document.getElementById("noBox");
  const container = document.getElementById("container");
  const celebration = document.getElementById("celebration");

  const yesLines = [
    "Way try again.",
    "Oop, you were a little slow there",
    "Damn Jacob tf?",
    "Is this why ur flag football team lost the game?",
    "Okay last one",
    "SIKE",
    "Okay jk really last one promise."
  ];

  const noLines = [
    "Wait wtf?",
    "You better not be trying to hit No",
    "WHAT DO YOU MEAN YOU DOn'T WANNA HANG OUT???",
    "JACOB HUH",
    "Oh my god.",
    "No whatever it's fine",
    "I'm fine. I get it.",
    "Okay but fr tho stop playing.",
    "Green box is what u meant to hit.",
    "Fine how about this?"
  ];

  let yesIdx = 0;
  let noIdx = 0;
  let yesArmed = false;
  let noArmed  = false;
  let done = false;

  // Detect "has hover" (desktop/laptop trackpad/mouse) vs "no hover" (most mobile)
  const canHover = window.matchMedia && window.matchMedia("(hover: hover)").matches;

  function moveElement(el){
    const padding = 12;
    const w = el.offsetWidth || 260;
    const h = el.offsetHeight || 60;

    const maxX = Math.max(padding, window.innerWidth - w - padding);
    const maxY = Math.max(padding, window.innerHeight - h - padding);

    const x = Math.floor(Math.random() * maxX);
    const y = Math.floor(Math.random() * maxY);

    el.style.position = "fixed";
    el.style.left = x + "px";
    el.style.top  = y + "px";
  }

  function buildCelebration(){
    celebration.innerHTML = "";
    celebration.style.display = "block";

    for (let i=0; i<20; i++){
      const b = document.createElement("div");
      b.className = "spinBox";
      b.style.left = (Math.random()*100) + "vw";
      b.style.top  = (Math.random()*100) + "vh";
      b.style.animationDuration = (600 + Math.random()*1200) + "ms";
      celebration.appendChild(b);
    }

    for (let i=0; i<26; i++){
      const c = document.createElement("div");
      c.className = "floatCircle";
      c.style.left = (Math.random()*100) + "vw";
      c.style.top  = (Math.random()*100) + "vh";
      c.style.animationDuration = (1800 + Math.random()*2200) + "ms";
      celebration.appendChild(c);
    }
  }

  function success(){
    if (done) return;
    done = true;

    buildCelebration();

    container.innerHTML = `
      <div class="successWrap">
        <p class="successText">
          WOOOHOOOO! Lmk when ur free. Btw this is how I used my study break (I'm going to crash out on anatomy lab studying).
        </p>
      </div>
    `;
  }

  // ----- YES FLOW -----
  function advanceYes(e){
    if (done) return;

    // If armed, allow normal click to succeed (no preventDefault here)
    if (yesArmed) return;

    if (e){
      e.preventDefault();
      e.stopPropagation();
    }

    yesBox.textContent = yesLines[yesIdx];

    if (yesIdx === yesLines.length - 1){
      yesArmed = true;

      // put it back in the original box area so it's easy to click
      yesBox.style.position = "absolute";
      yesBox.style.left = "0px";
      yesBox.style.top  = "0px";
      yesBox.style.cursor = "pointer";
      return;
    }

    yesIdx++;
    moveElement(yesBox);
  }

  function yesFinalClick(){
    if (done) return;
    if (yesArmed) success();
  }

  // Desktop: dodge on hover
  if (canHover){
    yesBox.addEventListener("mouseenter", advanceYes);
  }
  // Mobile: dodge on tap/click (pointerdown covers touch)
  yesBox.addEventListener("pointerdown", advanceYes);

  // Only the final armed click triggers success
  yesBox.addEventListener("click", yesFinalClick);

  // ----- NO FLOW -----
  function advanceNo(e){
    if (done) return;

    if (noArmed) return; // once armed, don't block the click

    if (e){
      e.preventDefault();
      e.stopPropagation();
    }

    noBox.textContent = noLines[noIdx];

    if (noIdx === noLines.length - 1){
      noArmed = true;

      // Optional: turn it green at the end so both end states feel "correct"
      // If you want it to stay red, delete these two lines.
      noBox.style.background = "#1d8f3a";

      // bring it back to the original row
      noBox.style.position = "absolute";
      noBox.style.left = "290px";
      noBox.style.top  = "0px";
      noBox.style.cursor = "pointer";
      return;
    }

    noIdx++;
    moveElement(noBox);
  }

  function noFinalClick(){
    if (done) return;
    if (noArmed) success();
  }

  if (canHover){
    noBox.addEventListener("mouseenter", advanceNo);
  }
  noBox.addEventListener("pointerdown", advanceNo);
  noBox.addEventListener("click", noFinalClick);

  // Keep boxes in-bounds on resize if they're currently "fixed"
  window.addEventListener("resize", () => {
    if (yesBox.style.position === "fixed") moveElement(yesBox);
    if (noBox.style.position === "fixed") moveElement(noBox);
  });
</script>

</body>
</html>
